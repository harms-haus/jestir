# Story 2.4: Context Validation Command

**Status:** Pending
**Epic:** 2 - Templates & LightRAG API Integration
**Story ID:** 2.4
**Title:** Context Validation Command
**Slug:** context-validation-command

## Story

As a parent,
I want to validate a context file before generation,
so that I can catch conflicts or missing references early.

## Acceptance Criteria

1. Command `jestir validate context.yaml` checks structure
2. Verify all entity references exist in LightRAG API
3. Check relationship consistency
4. Validate required settings are present
5. Warning for unusual patterns (e.g., no protagonists)
6. Clear error messages with fix suggestions

## Tasks/Subtasks

- [ ] Implement context file structure validation
- [ ] Add entity reference validation
- [ ] Implement relationship consistency checks
- [ ] Add required settings validation
- [ ] Create pattern analysis for warnings
- [ ] Add clear error message generation
- [ ] Create fix suggestion system
- [ ] Add validation command implementation
- [ ] Create comprehensive test coverage

## Dev Notes

This story provides validation capabilities for context files before story generation. It helps catch issues early and provides helpful suggestions for fixing problems. This is essential for maintaining data quality and preventing generation failures.

## Testing

- Test structure validation with various context files
- Test entity reference validation
- Test relationship consistency checks
- Test required settings validation
- Test pattern analysis warnings
- Test error message clarity
- Test fix suggestion accuracy
- Test validation command functionality

## QA Results

**Gate Decision**: PENDING
**Review Date**: TBD
**Reviewer**: TBD

**Risk Assessment**: TBD
**Risk Score**: TBD

**Key Findings**: TBD

**Recommendations**: TBD

**Risk Assessment**: [docs/qa/assessments/2.4-context-validation-command-risk-20241219.md](docs/qa/assessments/2.4-context-validation-command-risk-20241219.md)
**Gate File**: [docs/qa/gates/2.4-context-validation-command.yml](docs/qa/gates/2.4-context-validation-command.yml)

## Change Log

- Initial creation
